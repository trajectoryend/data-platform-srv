# Generated by Django 5.0.4 on 2024-05-07 03:07

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('system', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='FieldTab',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, primary_key=True, serialize=False, verbose_name='主键ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='添加时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('description', models.CharField(blank=True, max_length=256, null=True, verbose_name='描述信息')),
                ('name', models.CharField(blank=True, max_length=256, null=True, verbose_name='名称')),
                ('order_id', models.IntegerField(default=9999, verbose_name='排序')),
                ('icon', models.CharField(blank=True, max_length=256, null=True, verbose_name='图标')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='creator_query', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('dept_belong', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='dept_belong_query', to='system.deptinfo', verbose_name='数据归属部门')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='modifier_query', to=settings.AUTH_USER_MODEL, verbose_name='修改人')),
            ],
            options={
                'verbose_name': 'TAB签',
                'verbose_name_plural': 'TAB签',
                'ordering': ('order_id',),
            },
        ),
        migrations.CreateModel(
            name='FieldRow',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, primary_key=True, serialize=False, verbose_name='主键ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='添加时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('description', models.CharField(blank=True, max_length=256, null=True, verbose_name='描述信息')),
                ('name', models.CharField(blank=True, max_length=256, null=True, verbose_name='名称')),
                ('order_id', models.IntegerField(default=9999, verbose_name='排序')),
                ('icon', models.CharField(blank=True, max_length=256, null=True, verbose_name='图标')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='creator_query', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('dept_belong', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='dept_belong_query', to='system.deptinfo', verbose_name='数据归属部门')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='modifier_query', to=settings.AUTH_USER_MODEL, verbose_name='修改人')),
                ('to_field_tab', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='workflow.fieldtab', verbose_name='所属TAB签')),
            ],
            options={
                'verbose_name': '字段Row',
                'verbose_name_plural': '字段Row',
                'ordering': ('order_id',),
            },
        ),
        migrations.CreateModel(
            name='TicketCollection',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, primary_key=True, serialize=False, verbose_name='主键ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='添加时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('description', models.CharField(blank=True, max_length=256, null=True, verbose_name='描述信息')),
                ('ticket_id', models.IntegerField(verbose_name='工单ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='creator_query', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('dept_belong', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='dept_belong_query', to='system.deptinfo', verbose_name='数据归属部门')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='modifier_query', to=settings.AUTH_USER_MODEL, verbose_name='修改人')),
            ],
            options={
                'verbose_name': '用户收藏的工单',
                'verbose_name_plural': '用户收藏的工单',
                'ordering': ('-created_time',),
            },
        ),
        migrations.CreateModel(
            name='Workflow',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, primary_key=True, serialize=False, verbose_name='主键ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='添加时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('description', models.CharField(blank=True, max_length=256, null=True, verbose_name='描述信息')),
                ('name', models.CharField(max_length=256, verbose_name='名称')),
                ('workflow_id', models.IntegerField(verbose_name='工作流ID')),
                ('order_id', models.IntegerField(default=9999, verbose_name='排序')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='creator_query', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('dept_belong', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='dept_belong_query', to='system.deptinfo', verbose_name='数据归属部门')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='modifier_query', to=settings.AUTH_USER_MODEL, verbose_name='修改人')),
            ],
            options={
                'verbose_name': '工作流',
                'verbose_name_plural': '工作流',
                'ordering': ('order_id',),
            },
        ),
        migrations.CreateModel(
            name='TicketValidation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, primary_key=True, serialize=False, verbose_name='主键ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='添加时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('description', models.CharField(blank=True, max_length=256, null=True, verbose_name='描述信息')),
                ('unique_together', models.CharField(max_length=256, verbose_name='唯一值校验字段，使用逗号隔开')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='creator_query', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('dept_belong', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='dept_belong_query', to='system.deptinfo', verbose_name='数据归属部门')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='modifier_query', to=settings.AUTH_USER_MODEL, verbose_name='修改人')),
                ('to_workflow', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='workflow.workflow', verbose_name='所属工作流')),
            ],
            options={
                'verbose_name': '工单唯一值校验',
                'verbose_name_plural': '工单唯一值校验',
                'ordering': ('-created_time',),
            },
        ),
        migrations.AddField(
            model_name='fieldtab',
            name='to_workflow',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='workflow.workflow', verbose_name='所属工作流'),
        ),
        migrations.CreateModel(
            name='WorkflowRelation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, primary_key=True, serialize=False, verbose_name='主键ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='添加时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('description', models.CharField(blank=True, max_length=256, null=True, verbose_name='描述信息')),
                ('dst_ticket_search_params', models.TextField(blank=True, default=None, null=True, verbose_name='目标工单搜索参数')),
                ('src_ticket_search_params', models.TextField(blank=True, default=None, null=True, verbose_name='源工单搜索参数')),
                ('src_to_dst_relation', models.CharField(choices=[('One2One', '1 - 1'), ('One2Many', '1 - N'), ('Many2Many', 'N - N')], default='One2One', max_length=9, verbose_name='源-目标约束')),
                ('src_to_dst_description', models.CharField(blank=True, default=None, max_length=256, null=True, verbose_name='源-目标描述')),
                ('dst_to_src_description', models.CharField(blank=True, default=None, max_length=256, null=True, verbose_name='目标-源描述')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='creator_query', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('dept_belong', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='dept_belong_query', to='system.deptinfo', verbose_name='数据归属部门')),
                ('dst_workflow', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='dst_workflow', to='workflow.workflow', verbose_name='目工作流')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='modifier_query', to=settings.AUTH_USER_MODEL, verbose_name='修改人')),
                ('src_workflow', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='src_workflow', to='workflow.workflow', verbose_name='源工作流')),
            ],
            options={
                'verbose_name': '工作流关系',
                'verbose_name_plural': '工作流关系',
                'ordering': ('-created_time',),
            },
        ),
        migrations.CreateModel(
            name='TicketRelation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, primary_key=True, serialize=False, verbose_name='主键ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='添加时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('description', models.CharField(blank=True, max_length=256, null=True, verbose_name='描述信息')),
                ('src_ticket_id', models.IntegerField(verbose_name='源工单ID')),
                ('dst_ticket_id', models.IntegerField(verbose_name='目标工单ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='creator_query', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('dept_belong', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='dept_belong_query', to='system.deptinfo', verbose_name='数据归属部门')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='modifier_query', to=settings.AUTH_USER_MODEL, verbose_name='修改人')),
                ('to_workflow_relation', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='workflow.workflowrelation', verbose_name='所属工作流关系')),
            ],
            options={
                'verbose_name': '工单关系',
                'verbose_name_plural': '工单关系',
                'ordering': ('-created_time',),
            },
        ),
        migrations.CreateModel(
            name='WorkflowType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, primary_key=True, serialize=False, verbose_name='主键ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='添加时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('description', models.CharField(blank=True, max_length=256, null=True, verbose_name='描述信息')),
                ('name', models.CharField(blank=True, max_length=256, null=True, verbose_name='名称')),
                ('order_id', models.IntegerField(default=9999, verbose_name='排序')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='creator_query', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('dept_belong', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='dept_belong_query', to='system.deptinfo', verbose_name='数据归属部门')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='modifier_query', to=settings.AUTH_USER_MODEL, verbose_name='修改人')),
            ],
            options={
                'verbose_name': '工作流类型',
                'verbose_name_plural': '工作流类型',
                'ordering': ('order_id',),
            },
        ),
        migrations.AddField(
            model_name='workflow',
            name='to_workflow_type',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='workflow.workflowtype', verbose_name='所属工作流类型'),
        ),
        migrations.CreateModel(
            name='WorkFlowView',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, primary_key=True, serialize=False, verbose_name='主键ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='添加时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('description', models.CharField(blank=True, max_length=256, null=True, verbose_name='描述信息')),
                ('view_type', models.SmallIntegerField(choices=[(0, '系统视图'), (1, '用户视图')], default=1, verbose_name='视图类型')),
                ('search_mode', models.SmallIntegerField(choices=[(0, '基础搜索'), (1, '高级搜索')], default=0, verbose_name='搜索类型')),
                ('search_params', models.TextField(blank=True, default=None, null=True, verbose_name='搜索条件')),
                ('name', models.CharField(max_length=256, verbose_name='名称')),
                ('order_id', models.IntegerField(default=9999, verbose_name='排序')),
                ('order_field', models.CharField(blank=True, default=None, max_length=256, null=True, verbose_name='排序字段')),
                ('order_type', models.CharField(choices=[('ASC', '升序'), ('DESC', '降序')], default='DESC', max_length=4, verbose_name='排序方式')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='creator_query', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('dept_belong', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='dept_belong_query', to='system.deptinfo', verbose_name='数据归属部门')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', related_query_name='modifier_query', to=settings.AUTH_USER_MODEL, verbose_name='修改人')),
                ('to_workflow', models.ForeignKey(blank=True, default=None, null=True, on_delete=django.db.models.deletion.SET_NULL, to='workflow.workflow', verbose_name='所属工作流')),
            ],
            options={
                'verbose_name': '视图',
                'verbose_name_plural': '视图',
                'ordering': ('order_id',),
            },
        ),
    ]
